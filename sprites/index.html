<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Mario by Alex</title>
    <meta name="description" content="Легенда Марио от Алекса" />
    <!-- прикол от apple для контроля css разметки на мобильных устройствах -->
    <meta name="viewport" content="width=device-width" />

    <link rel="stylesheet" href="css/Maincss.css" />
    <style>
      body {
        background: Turquoise;
      }
      .hide {
        display: none !important;
      }
      .name {
        position: absolute;
        left: 30%;
        top: 0;
      }
      .marioPic {
        position: absolute;
        left: 10%;
        top: 40%;
      }
      .badguyPic {
        position: absolute;
        right: 10%;
        top: 40%;
      }
      h1 {
        font-family: "Avant Garde", Avantgarde, "Century Gothic", CenturyGothic,
          "AppleGothic", sans-serif;
        font-size: 135px;
        text-align: center;
        text-transform: uppercase;
        text-rendering: optimizeLegibility;
      }
      .author {
        position: absolute;
        left: 55%;
        top: 35%;
        font-size: 30px;
      }
      .author p {
        font-weight: bold;
        font-style: italic;
        color: #ffffff;
        text-shadow: 0 0 5px #ffffff, 0 0 10px #ffffff, 0 0 20px #ffffff,
          0 0 80px #00ff00, 0 0 160px #00ff00, 0 0 180px #00ff00,
          0 0 100px #00ff00, 0 0 150px #00ff00;
      }
      .elegantshadow {
        color: #ffd700;
        letter-spacing: 0.9em;
        text-shadow: 1px -1px 0 #767676, -1px 2px 1px #737272,
          -2px 4px 1px #767474, -3px 6px 1px #787777, -4px 8px 1px #7b7a7a,
          -5px 10px 1px #7f7d7d, -6px 12px 1px #828181, -7px 14px 1px #868585,
          -8px 16px 1px #8b8a89, -9px 18px 1px #8f8e8d, -10px 20px 1px #949392,
          -11px 22px 1px #999897, -12px 24px 1px #9e9c9c, -13px 26px 1px #a3a1a1,
          -14px 28px 1px #a8a6a6, -15px 30px 1px #adabab, -16px 32px 1px #b2b1b0;
      }
      .but {
        position: absolute;
        background-color: #ff7f50;
        width: 100%;
        height: 100%;
        font-size: 20px;
        font-weight: bold;
        font-style: italic;
        color: white;
      }

      .main {
        position: absolute;
        top: 45%;
        left: 30%;
        width: 500px;
      }

      .button {
        position: relative;
        width: 500px;
        height: 50px;
        margin: 15px auto 0 auto;
        background: #b9aea2;
        box-shadow: 0px 3px 3px rgba(0, 0, 0, 0.2);
      }

      .button:first-child:before {
        content: " ";
        position: absolute;
        z-index: -1;
        width: 40px;
        height: 0px;
        top: 14px;
        left: -20px;
        margin: 0px 0px 0 0px;
        border-top: 20px solid transparent;
        border-left: 15px solid white;
        border-bottom: 20px solid transparent;
        -webkit-transform: skew(-5deg);
        -moz-transform: skew(-5deg);
        -o-transform: skew(-5deg);
        background: #b9aea2;
      }

      .button:last-child:before {
        content: " ";
        position: absolute;
        z-index: -1;
        width: 40px;
        height: 0px;
        top: 14px;
        right: -20px;
        margin: 0px 0px 0 0px;
        border-top: 20px solid transparent;
        border-right: 15px solid white;
        border-bottom: 20px solid transparent;
        -webkit-transform: skew(5deg);
        -moz-transform: skew(5deg);
        -o-transform: skew(5deg);
        background: #b9aea2;
      }

      .button:after {
        content: " ";
        position: absolute;
        display: block;
        width: 240px;
        height: 10px;
        bottom: -10px;
        left: 30px;
        -webkit-transform: skew(-80deg);
        -moz-transform: skew(-80deg);
        -o-transform: skew(-80deg);
        background: #6b6562;
      }

      .button:last-child:after {
        width: 0;
        height: 0;
        background: transparent;
      }
      .controllerBar {
        position: absolute;
        top: 0;
        left: 0;
      }
      .but1 {
        position: relative;
        font-size: 30px;
        width: 250px;
        height: 100px;
        margin: 60px auto 15px 30px;
        background: #c0c0c0;
        box-shadow: 0px 6px 5px rgba(59, 221, 94, 0.2);
      }
      .modal {
        display: block;
        width: 600px;
        max-width: 100%;
        height: 300px;
        max-height: 100%;
        position: fixed;
        z-index: 100;
        left: 48%;
        top: 68%;
        border-radius: 10px;
        transform: translate(-50%, -50%);
        background: #98fb98;
        box-shadow: 0 0 60px 10px rgba(0, 0, 0, 0.9);
      }
      .modal__header {
        border-bottom: 1px gray solid;
        padding: 10px 15px;
        margin-bottom: 15px;
      }

      .modal__close {
        position: absolute;
        top: 15px;
        right: 15px;
        width: 28px;
        height: 28px;
        border-radius: 50%;
        background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAEFCu8CAAAABGdBTUEAALGPC/xhBQAAAqpJREFUSA2tljtyFEEMhsdgHJpb2NyAxwkgcQHGHGE3Bs4B8RICV6G4ARSERH4QGaog4vF/qv7HWu3MzrqMqjR69C9puls9PV13QU9Rr13Y3Vfpf7GPxLdRROGw0hs43vHYFuM9wYAMOcbYaQ47u7fJgRMGFMkwIgyHyIDesNMgAD3dkvZDvGWPlSVUG4wxBu43h0HIGT4UO7Hv2EeoB1wCQPhYzi/i12JHSA26acWpLV96IMtDGQZU+TEDrT9qAb8lD8RnzXbwC9mL5vsjGbSvpwGnzWfB+5s8F7C/cLLSDrS8y0Ci+gbguutiBzxLYCoQkMm4D0NOD47JwVUl0Vz8U5wD38veFa8ldptDw9xpfhZvkj4JkStlnT1eoXxmMrjqHKUlYlMBsclsdg5gZWkKmgP/Q3EQi2Fgc/WNe2yH5IOKowscWDslxXV0lXF7DNiwzMEOpLLHkTHX7ECv3XKvBIH5Ll7KlOfEmIm3yAWeMEDf2Ylt+iYlv/Zz2cbR39FKdmBDeU4O5jMB7jMA0yspDp6SjunlJsE3enRROAGchFyVkzIruEmTT91cTLJ61GpyMGApfinioGwy3VxwSCcHudbS/yhUi5NzhXbl4QbJ4EVB0T65nYzF59ZyiFvMGFqNGkE0a25yg/KHuUFDkJxjB9dCAdAjHwbno0YcDP4s7KySt/dfh9RJ4gWGVsF54wgP3VMGWDKbenfl6nxYwBg/JuNjw8UwBsA/tEdyr9DU7MgVn8V9Kflj7OL8kY0tJ8nH9g9//mg7HzX2xEFzPT1g6V+pBglRZzE2+3y9ON8sJ0LnD8eXHCAus4X4QMyFt26PGAMDliPhi5A85OwvROlLtCOLdfZbXVWSi5wb0WOh+Nm7bFFiiL0S8btDc/HL80Z83hgdH2NgJukfa8ehuEonW4wAAAAASUVORK5CYII=");
        overflow: hidden;
        text-indent: -999em;
        text-decoration: none;
      }
      .modal__content {
        padding: 2px 5px;
        min-height: 100px;
      }

      .form-field {
        padding: 0 0 10px;
      }
      .form-field input {
        border: 1px gray solid;
        border-radius: 5px;
        padding: 8px 12px;
        margin: 0 10px;
        font-size: 14px;
        font-family: "Exo 2", sans-serif;
      }
      .modal__footer {
        border-top: 1px gray solid;
        padding: 15px;
        margin-top: 15px;
        text-align: right;
      }

      .modal__footer button {
        border: 1px gray solid;
        border-radius: 5px;
        padding: 8px 12px;
        margin: 0 10px;
        font-size: 14px;
        font-family: "Exo 2", sans-serif;
      }

      .modal__footer .modal__cancel {
        background-color: #dc3545;
        border-color: #dc3545;
        color: #fff;
      }
      .modal__footer .modal__save {
        background-color: #28a745;
        border-color: #28a745;
        color: #fff;
      }
      .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 50;
        background: rgba(0, 0, 0, 0.6);
      }
      .hello {
        moz-transform: rotate(-30deg);
        -webkit-transform: rotate(-30deg);
        -o-transform: rotate(-30deg);
        -ms-transform: rotate(-30deg);
        transform: rotate(-30deg);
        position: absolute;
        top: 14%;
        left: 9%;
        font-weight: bold;
        font-size: 40px;
        font-style: italic;
        color: #dc143c;
      }
    </style>
  </head>
  <body>
    <script type="text/javascript" src="js/util.js"></script>
    <script type="text/javascript" src="js/input.js"></script>
    <script type="text/javascript" src="js/resources.js"></script>
    <script type="text/javascript" src="js/sprite.js"></script>
    <script type="text/javascript" src="js/entity.js"></script>
    <script type="text/javascript" src="js/pipe.js"></script>
    <script type="text/javascript" src="js/mushroom.js"></script>
    <script type="text/javascript" src="js/fireflower.js"></script>
    <script type="text/javascript" src="js/star.js"></script>
    <script type="text/javascript" src="js/fireball.js"></script>
    <script type="text/javascript" src="js/coin.js"></script>
    <script type="text/javascript" src="js/bcoin.js"></script>
    <script type="text/javascript" src="js/goomba.js"></script>
    <script type="text/javascript" src="js/koopa.js"></script>
    <script type="text/javascript" src="js/floor.js"></script>
    <script type="text/javascript" src="js/block.js"></script>
    <script type="text/javascript" src="js/rubble.js"></script>
    <script type="text/javascript" src="js/prop.js"></script>
    <script type="text/javascript" src="js/player.js"></script>
    <script type="text/javascript" src="js/flag.js"></script>
    <script type="text/javascript" src="js/level.js"></script>
    <script type="text/javascript" src="js/levelSprite.js"></script>
    <script type="text/javascript" src="js/11tunnel.js"></script>
    <script type="text/javascript" src="js/game.js"></script>
    <div class="MainMenu" id="MainMenu">
      <div class="hello" id="hello">Hello, my dear ...</div>
      <img src="Mario.jpg" alt="Марио" class="marioPic" />
      <img src="badguy.jpg" alt="Плохой парень" class="badguyPic" />
      <div class="header">
        <div class="name elegantshadow">
          <h1>MARIO</h1>
        </div>
        <div class="author">
          <p>by Alex Kirillov</p>
        </div>
      </div>
      <div class="main">
        <div class="button">
          <button class="but" id="startButton">Start game</button>
        </div>
        <div class="button">
          <button class="but">Records</button>
        </div>
        <div class="button">
          <button class="but" id="changeLogo">Change Name</button>
        </div>
        <div class="button">
          <button class="but">My links</button>
        </div>
      </div>
    </div>
    <div class="controllerBar hide" id="controllerBar">
      <button class="but1" id="backToMainMenu">Back To Menu</button><br />
      <button class="but1" id="resetGame">Reset Game</button>
    </div>
    <div class="modal hide" id="modal">
      <header class="modal__header">
        <a href="#" class="modal__close" title="Закрыть модальное окно"
          >Закрыть</a
        >
        <h2>Enter your name</h2>
      </header>

      <main class="modal__content">
        <div class="form-field">
          <label for="name">Your Name:</label>
          <input class="input__default" type="text" id="name" name="name" />
        </div>
      </main>

      <footer class="modal__footer">
        <button class="modal__cancel" title="Отмена">
          Close
        </button>
        <button id="modal-save" class="modal__save" title="Сохранить">
          Save
        </button>
      </footer>
    </div>
    <script>
      var isInit = false;
      var startButton = document.getElementById("startButton");
      var mainMenu = document.getElementById("MainMenu");
      var controllerBar = document.getElementById("controllerBar");
      startButton.addEventListener("click", function(e) {
        e.preventDefault();
        if (!isInit) {
          mainMenu.classList.add("hide");
          canvas.classList.remove("hide");
          controllerBar.classList.remove("hide");
          init();
        }
      });
      var backToMainMenu = document.getElementById("backToMainMenu");
      backToMainMenu.addEventListener("click", function(e) {
        e.preventDefault();
        backToMenu();
      });
      var resetGame = document.getElementById("resetGame");
      resetGame.addEventListener("click", function(e) {
        e.preventDefault();
        reset();
        resetGame.blur();
        canvas.focus();
      });
      var cancel = document.querySelector(".modal__cancel");
      cancel.addEventListener("click", function(e) {
        e.preventDefault();
        modal.classList.add("hide");
        mainMenu.classList.add("modal-overlay");
      });
      var close = document.querySelector(".modal__close");
      close.addEventListener("click", function(e) {
        e.preventDefault();
        modal.classList.add("hide");
        mainMenu.classList.add("modal-overlay");
      });
      var inputName = document.getElementById("name");
      var save = document.querySelector(".modal__save");
      save.addEventListener("click", function(e) {
        if (inputName.value != "") {
        let name = inputName.value;
        localStorage.setItem("name", name);
        let container = document.getElementById("hello");
        container.innerHTML = `Hello my dear ${name}`;
        input.value = "";
        } else {
          inputName.style.borderColor = 'red';
        }
      });
      var changeLogo = document.getElementById("changeLogo");
      changeLogo.addEventListener("click", function(e) {
        e.preventDefault();
        modal.classList.remove("hide");
        mainMenu.classList.add("modal-overlay");
      });
      function checkName() {
        let playerName = localStorage.getItem("name");
        if (playerName || playerName != undefined) {
          let container = document.getElementById("hello");
          container.innerHTML = `Hello my dear ${playerName}`;
        } else {
          modal.classList.remove("hide");
          mainMenu.classList.add("modal-overlay");
        }
      }
      window.onload = function() {
        checkName();
      };
    </script>
  </body>
</html>
